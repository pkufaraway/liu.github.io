<!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/css/index_config.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+SC|Lexend+Deca">
</head>

<body>
<div class="container">
    <div class="left_bar">
      

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/left_bar.css">

<div class="myself">
<img class="portrait" src="../../../../assets/img/myself.png">
<div class="contacts">
    <a href="mailto:lyy910619@gmail.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
    
    
    
    <a href="http://linkedin.com/in/yaoyuan-liu-463142a9/" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
    
    
    
    <a href="http://github.com/pkufaraway" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
    
    
    
    
    
    
    
    
    
    
    
</div>
</div>

    </div>
    <div class="right_content">
        <div class="nav_list">
            
<link rel="stylesheet" href="/css/header.css">

<div>

    <a class="button" href="/pages/all.html"> All Posts </a>

    <a class="button" href="/pages/life.html"> Life </a>

    <a class="button" href="/pages/tech.html"> Tech </a>

    <a class="button" href="/pages/unknown.html"> Unknown </a>

</div>

        </div>
        <div class="post">
            <p> <h2 id="the-main-purpose-of-this-series">The main purpose of this series</h2>

<p>As my internship is nearly finished, I decide to write a tech-review for all the amazing features that I have learnt during this summer.</p>

<p>Today I gonna talk about some important features that I’ve learnt in Scala.</p>

<p>Scala is really amazing! Although Java8 has come with lambda feature, Scala look more beatiful. Since most people will still use Java in old style, most Java code looks aweful.</p>

<h2 id="the-most-common-function-i-used-in-scala-map">The most common function I used in Scala: Map</h2>

<p>map is a useful function that you can use, it can be used to convert <code class="language-plaintext highlighter-rouge">Collection[A]</code> to <code class="language-plaintext highlighter-rouge">Collection[B]</code>, such as:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="nv">a</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nv">a</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">x</span> <span class="k">=&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="n">res3</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nv">a</span><span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="k">_</span><span class="o">+</span><span class="mi">1</span><span class="o">)</span>
<span class="n">res4</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">)</span>
</code></pre></div></div>

<p>From the above example you can see that you can use <code class="language-plaintext highlighter-rouge">_</code> if you don’t want to use an arrow(for example, call a method belongs to every element).</p>

<p>On the other hand, you can use map with pattern matching.</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="nv">a</span><span class="o">.</span><span class="py">map</span><span class="o">{</span>
     <span class="o">|</span> <span class="k">case</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">=&gt;</span> <span class="kc">true</span>
     <span class="o">|</span> <span class="k">case</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">=&gt;</span> <span class="kc">false</span>
     <span class="o">|</span> <span class="o">}</span>
<span class="n">res5</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Boolean</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span>
</code></pre></div></div>

<h2 id="absolutely-pattern-matching-is-so-cute">Absolutely, pattern matching is so cute</h2>

<p>Scala has an important object called Option, Option is a brilliant choice for something that can be null, for example:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="nv">b</span> <span class="k">=</span> <span class="nc">Option</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="n">b</span><span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Some</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
</code></pre></div></div>

<p>When you want to figure out whether a val is parameter or not, just use match:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="nf">reveal</span><span class="o">(</span><span class="n">a</span> <span class="k">:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span> <span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="o">{</span>
     <span class="o">|</span> <span class="n">a</span> <span class="k">match</span><span class="o">{</span>
     <span class="o">|</span> <span class="k">case</span> <span class="nc">Some</span><span class="o">(</span><span class="n">s</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nv">s</span><span class="o">.</span><span class="py">toString</span>
     <span class="o">|</span> <span class="k">case</span> <span class="nc">None</span> <span class="k">=&gt;</span> <span class="s">"None"</span>
     <span class="o">|</span> <span class="o">}</span>
     <span class="o">|</span> <span class="o">}</span>
<span class="n">reveal</span><span class="k">:</span> <span class="o">(</span><span class="kt">a:</span> <span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">])</span><span class="nc">String</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nf">reveal</span><span class="o">(</span><span class="n">b</span><span class="o">)</span>
<span class="n">res7</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nf">reveal</span><span class="o">(</span><span class="nc">None</span><span class="o">)</span>
<span class="n">res8</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="nc">None</span>
</code></pre></div></div>

<p>Keep using Option can help you to deal with any kind of data that can be null, you won’t need to worry about using <code class="language-plaintext highlighter-rouge">a == null</code> any more.</p>

<h2 id="the-lovely-fold-series-function">The lovely fold series function</h2>

<p>What will you do to sum a <code class="language-plaintext highlighter-rouge">List[int]</code>? For most programming language, you may expect that the class <code class="language-plaintext highlighter-rouge">List</code> has an inner method to do, or some existing lib to use. What if I only want to sum all the even numbers? There is no easy way to do that for traditional language. How to do that in scala?</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="nv">a</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">4</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>
<span class="n">a</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="nc">List</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">)</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="nv">a</span><span class="o">.</span><span class="py">fold</span><span class="o">(</span><span class="mi">0</span><span class="o">){</span>
     <span class="o">|</span> <span class="nf">case</span> <span class="o">(</span><span class="n">sum</span><span class="o">,</span><span class="n">x</span><span class="o">)</span> <span class="k">if</span> <span class="n">x</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span> <span class="k">=&gt;</span> <span class="n">sum</span> <span class="o">+</span> <span class="n">x</span>
     <span class="o">|</span> <span class="nf">case</span> <span class="o">(</span><span class="n">sum</span><span class="o">,</span><span class="n">x</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">sum</span>
     <span class="o">|</span> <span class="o">}</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> <span class="mi">6</span>
</code></pre></div></div>

<p>You may think that it looks not simple enough compare to a for loop, But how about more complex logic during this <code class="language-plaintext highlighter-rouge">fold</code>?</p>

<p>The number 0 after fold is the basic value for sum, and I use pattern matching here too.</p>
</p>
        </div>
    </div>
</div>
</body>

</html>